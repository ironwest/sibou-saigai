# 労働災害－死亡災害オープンデータレポジトリ

厚生労働省のオープンデータ（労働災害－死亡災害）のスクレイピング、前処理、Shinyアプリ化に関するGihubレポジトリです。

## 目的

このレポジトリでは、

* 平成3年から令和4年度(2023年時点の最新分)までのエクセルファイルを一つにしたCSVを作成すること
* 全ての年度で可能な限り誤分類を減らすような処理を行うこと
* CSVを作成する工程をウェブスクレイピングから出力までを全てR言語で実施し、そのスクリプトを本レポジトリに公開すること
* R Shinyで簡易的に集計・事例抽出を行うアプリケーションを作成してShinyapps.ioへ公開、そのスクリプトを本レポジトリに公開すること

を目的としています。

とくに、Rスクリプトを全て公開することで、製作者が意図していないミスや、見落としていた誤分類などの指摘・改善を通して、より使いやすいデータセットになる可能性に期待しています。また、アプリケーションを公開することで、PC操作が得意でない各企業の労働安全衛生担当者が自社での死亡事故のリスク低減の一助になれば、幸甚です。


[^1]: 濱島 京子, 機械判読の観点からみた労働災害データベースの課題, 労働安全衛生研究, 2022, 15 巻, 2 号, p. 177-188, 公開日 2022/09/30, [早期公開] 公開日 2022/07/26, Online ISSN 1883-678X, Print ISSN 1882-6822, https://doi.org/10.2486/josh.JOSH-2022-0009-CHO, https://www.jstage.jst.go.jp/article/josh/15/2/15_JOSH-2022-0009-CHO/_article/-char/ja


## 各ファイルの説明

大まかには、

* `scraping_sibou.R`で、
    * 職場のあんぜんサイトからのエクセルファイルの`dldata_sibou`フォルダへのダウンロード
    * 各種前処理(`sibou_codes.xlsx`に含まれるコードと名前の対応表をもとにした置き換えなど)
    * 結果の`死亡データ_統合.csv`への出力
    * 結果をshinyアプリで利用するために便利な形式、`death_by_accident_data.rds`での出力

* `sibou_codes.xlsx`は、[職場のあんぜんサイトで公開されているWordファイル](https://anzeninfo.mhlw.go.jp/anzen_pg/rousai_db_siyou1109.doc)、`rousai_db_siyou1109.doc`のマスターデータと思われる表を3つのシートに分けて保存したものになります。(この表の作成にもRでWordファイルから作成するべきでしたが、手間の観点から手作業としています。)

* `sibou_app.R`が、Shinyapps.io上で動作しているアプリの本体です。動作に必要な別のファイルは`death_by_accident_data.rds`と`sibou_codes.xlsx`となります。

`scraping_sibou.R`がデータの前処理工程全てになります。コメントは適宜つけていますが、メモ程度です。
